@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- Base page backdrop + typography smoothing --- */
html, body { height: 100%; }
body {
  background: #0B0E13;
  color: #fff;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Selection */
::selection { background: rgba(255,255,255,.14); color: #fff; }

/* WebKit dark bounce */
@supports (-webkit-touch-callout: none) {
  body { background-color: #0B0E13; }
}

/* ===========================
   Global rhythm & readability
=========================== */
:root{
  --ep-maxw: 72rem;            /* 1152px */
  --ep-pad-x: clamp(1rem, 3vw, 2rem);
  --ep-section-y: clamp(1.75rem, 4vw, 3rem);
  --ep-card-bg: rgba(255,255,255,0.04);
  --ep-card-brd: rgba(255,255,255,0.10);
}

/* Unified container */
.ep-container{
  width: 100%;
  max-width: var(--ep-maxw);
  margin-inline: auto;
  padding-inline: var(--ep-pad-x);
}

/* Page glow: soft radial tint behind content */
.page-glow{
  position: relative;
  isolation: isolate;
}
.page-glow::before{
  content:"";
  position: absolute; inset: -10% -5% auto -5%;
  height: 420px;
  background: radial-gradient(60% 40% at 50% -10%, rgba(59,130,246,.18), transparent 60%);
  filter: blur(10px);
  z-index: -1;
  pointer-events: none;
}

/* Section spacing */
section{ margin-block: var(--ep-section-y); }

/* Type scale (mobile-first) */
h1{ @apply text-3xl font-extrabold tracking-tight; }
h2{ @apply text-2xl font-bold; }
h3{ @apply text-xl font-semibold; }
p, li{ @apply leading-relaxed; }
@media (min-width: 768px){
  h1{ @apply text-5xl; }
  h2{ @apply text-3xl; }
}

/* Links (accessible focus) */
a{ transition: color .2s ease, background-color .2s ease, border-color .2s ease; }
a:focus-visible{ outline: 2px solid rgba(59,130,246,.6); outline-offset: 2px; border-radius: .5rem; }

/* No scrollbar utility */
.no-scrollbar{
  -ms-overflow-style: none; scrollbar-width: none;
}
.no-scrollbar::-webkit-scrollbar{ display: none; }

/* Buttons baseline (CTA components can keep Tailwind classes; this polishes defaults) */
.btn{
  @apply inline-flex items-center justify-center rounded-xl px-5 py-3 text-sm font-semibold min-h-[44px];
}
.btn-primary{
  @apply bg-sky-600 text-white hover:bg-sky-500;
  box-shadow: 0 12px 40px rgba(37,99,235,.35);
}
.btn-outline{
  @apply border border-white/15 bg-white/5 text-white hover:bg-white/10;
}
.btn-ghost{
  @apply text-white/90 hover:text-white;
}

/* Chips */
.chip{
  @apply inline-flex items-center rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-white/80 shadow-sm;
}

/* Cards */
.card{
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  border: 1px solid var(--ep-card-brd);
  border-radius: 1rem;
  padding: 1rem;
  backdrop-filter: saturate(120%) blur(4px);
}
@media (min-width: 768px){
  .card{ padding: 1.25rem; border-radius: 1.25rem; }
}

/* Grids that gracefully collapse on mobile */
.grid-responsive{
  display: grid; gap: .75rem;
}
@media (min-width: 768px){
  .grid-3-md{ grid-template-columns: repeat(3, minmax(0,1fr)); }
  .grid-2-md{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}

/* Footer polish */
.footer-links a{
  @apply text-white/80 hover:text-white;
}
.footer-meta{
  @apply text-xs text-white/50;
}

/* ===========================
   Unified main page title
=========================== */
.page-title { @apply text-3xl sm:text-4xl font-extrabold tracking-tight text-white mb-6; }

/* =========================================
   PRO SPLASH (full-bleed, centered, no edge banding)
   Hook with: <div id="ep-splash" />
   Add class "revealed" to ease zoom; add "hidden" to fade out.
========================================= */
#ep-splash {
  position: fixed;
  inset: 0;
  z-index: 9999;
  clip-path: inset(-2px -2px -2px -2px); /* kill GPU edge seams */
  overflow: hidden;

  /* Desktop / default background image */
  background-color: #0B0E13;
  background-image: url("/imageep2.png?v=12");
  background-position: 50% 55%;
  background-size: cover;
  background-repeat: no-repeat;

  /* Animate the container (not an <img>) */
  filter: blur(0) brightness(1) saturate(1.02);
  transform: scale(1.08) translateZ(0);     /* slight zoom-out start (desktop) */
  transform-origin: center center;

  opacity: 1;
  transition: transform 900ms ease, filter 900ms ease, opacity 600ms ease;
  will-change: transform, filter, opacity;
  pointer-events: auto; /* tap to skip */
}

/* Soft neutral vignette for readability */
#ep-splash::before {
  content: "";
  position: absolute; inset: 0;
  pointer-events: none;
  background:
    radial-gradient(120% 90% at 50% 25%, rgba(0,0,0,.10), transparent 55%),
    radial-gradient(120% 120% at 50% 85%, rgba(0,0,0,.55), transparent 70%),
    linear-gradient(0deg, rgba(0,0,0,.22), rgba(0,0,0,.12) 35%, rgba(0,0,0,0) 65%);
}

/* Reveal: gently settle the zoom (desktop) */
#ep-splash.revealed {
  transform: scale(1.02) translateZ(0);
  filter: blur(0) brightness(1) saturate(1.02);
}

/* Hide cleanly */
#ep-splash.hidden { opacity: 0; pointer-events: none; }

/* ===== Mobile override: force portrait crop & calmer motion ===== */
@media (max-width: 900px), (orientation: portrait) {
  #ep-splash {
    background-image:
      image-set(
        url("/imageep2-mobile.jpg?v=12") type("image/jpeg"),
        url("/imageep2-mobile.png?v=12") type("image/png")
      ) !important;
    background-position: center !important;
    background-size: cover !important;
    background-repeat: no-repeat !important;
    transform: none !important;         /* avoid oversized feel on phones */
  }
  #ep-splash.revealed { transform: none !important; }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  #ep-splash { transform: none; transition: none; }
}

/* =========================================
   HERO REVEAL
========================================= */
.ep-hero {
  opacity: 0;
  transform: translateY(10px);
  transition: opacity .9s ease .25s, transform .9s ease .25s;
}
.ep-hero.ep-hero--show { opacity: 1; transform: none; }

/* =========================================
   HERO GLOW
========================================= */
.ep-hero-splash { position: relative; isolation: isolate; }
.ep-hero-splash > * { position: relative; z-index: 1; }
.ep-hero-splash::before{
  content: "";
  position: absolute;
  top: -140px;
  left: 50%;
  transform: translateX(-50%);
  width: min(1400px, 92vw);
  height: 560px;
  background: url("/imageep2.png?v=12") center top / 1200px auto no-repeat;
  opacity: 0.88;
  filter: blur(18px) brightness(1.28) saturate(1.12);
  mix-blend-mode: screen;
  pointer-events: none;
  z-index: 0;
}
@media (max-width: 900px), (orientation: portrait) {
  .ep-hero-splash::before { display: none; }
}

/* =========================================
   Header (mobile readability)
========================================= */
.site-header{
  position: sticky; top: 0; z-index: 50;
  backdrop-filter: saturate(140%) blur(8px);
  background: rgba(11,14,19,0.6);
  border-bottom: 1px solid rgba(255,255,255,0.08);
}
.site-header .brand{
  @apply font-semibold text-white text-lg;
}
.site-nav a{
  @apply rounded-md px-3 py-2 text-sm text-white/85 hover:bg-white/5 hover:text-white;
}

/* Mobile menu sheet */
.mobile-nav{
  position: fixed; inset: 0 0 auto 0; top: 56px;
  background: rgba(11,14,19,0.9);
  backdrop-filter: blur(10px);
  border-top: 1px solid rgba(255,255,255,0.08);
  transform: translateY(-8px);
  opacity: 0; pointer-events: none;
  transition: opacity .2s ease, transform .2s ease;
}
.mobile-nav.open{
  transform: none; opacity: 1; pointer-events: auto;
}
.mobile-nav a{
  display: block; padding: .875rem var(--ep-pad-x);
  border-bottom: 1px solid rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.9);
}
.mobile-nav a:hover{ background: rgba(255,255,255,0.06); }

/* =========================================
   Footer readability (mobile-first)
========================================= */
footer .section{
  @apply grid gap-6 md:grid-cols-3;
}
footer h3{ @apply text-sm font-semibold text-white/90; }
footer p, footer li{ @apply text-sm text-white/75; }
.footer-meta{ @apply mt-6 border-t border-white/10 pt-4 flex flex-wrap items-center justify-between gap-3; }