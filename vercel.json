{
  "rewrites": [
    {
      "source": "/bp-simulator",
      "destination": "https://executive-partners-bp-simulator.vercel.app/business-plan-simulator"
    },
    {
      "source": "/business-plan-simulator",
      "destination": "https://executive-partners-bp-simulator.vercel.app/business-plan-simulator"
    },
    {
      "source": "/bp-simulator/(.*)",
      "destination": "https://executive-partners-bp-simulator.vercel.app/business-plan-simulator/$1"
    },

    /* Proxy Next.js assets & API for simulator pages ONLY when our cookie is set */
    {
      "source": "/_next/:path*",
      "has": [
        { "type": "cookie", "key": "ep-sim", "value": "1" }
      ],
      "destination": "https://executive-partners-bp-simulator.vercel.app/_next/:path*"
    },
    {
      "source": "/api/:path*",
      "has": [
        { "type": "cookie", "key": "ep-sim", "value": "1" }
      ],
      "destination": "https://executive-partners-bp-simulator.vercel.app/api/:path*"
    }
  ]
}
